/*! mpce-simple-contact-form-addon - v1.0.2 - 2016-03-30 */
function mpce_cfa_onloadCallback(){for(var a=document.getElementsByClassName("cfa-captcha"),b=0;b<a.length;b++){var c=grecaptcha.render(a[b].id,{sitekey:MPCE_CFA_Ajax.sitekey});widgets.push(c),a[b].setAttribute("data-widget",c)}}!function(a){a(function(){for(var b=a(":checkbox[required]"),c=[],d=0;d<b.length;++d){var e=b[d].name;c.push(e)}c=c.reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[]);for(var d in c)!function(){var b=c[d],e=a('input[name="'+b+'"]');e.change(function(){e.is(":checked")?e.removeAttr("required"):e.attr("required","required")})}()}),a.fn.serializeObject=function(){var b={},c=this.serializeArray();return a.each(c,function(){b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""}),b},a(document).ready(function(){a("body").on("MPCEObjectUpdated",function(b,c,d){var e=a(".cfa-captcha",c);e.each(function(a,b){grecaptcha.render(b.id,{sitekey:MPCE_CFA_Ajax.sitekey})})}),a.webshims.polyfill("forms forms-ext"),a(".mpce-cfa-form").unbind("submit").on("submit",function(b){b.preventDefault();var c=a(this),d=a(this).find(".mpce-cfa-loader"),e=a(".cfa-captcha",c).first();if(0!==e.length){var f=grecaptcha.getResponse(a(e).data("widget"));if(!f){var g=c.find(".cfa-captcha-error");return a(g).fadeIn(),setTimeout(function(){a(g).fadeOut()},3500),!1}}d.fadeIn();var h={};h.action="mpce_cfa_contact_ajax",h.security=MPCE_CFA_Ajax.security;var i=a("input,select,textarea",c).serializeObject(); i = new FormData(this);return i=a.extend(!0,i,h),a.ajax({data:i,type:"POST",dataType : "json",contentType: false,cache: false,processData:false,url:MPCE_CFA_Ajax.ajaxurl,success:function(b){if(d.fadeOut(),b&&b.success===!0){var e=a(".mpce-cfa-success",c),f=a(".mpce-cfa-message",c);f.html('<div class="mpce-cfa-success"> '+MPCE_CFA_Ajax.success+"</div>"),a(f).fadeIn(200),a(e).fadeIn(200),setTimeout(function(){a(f).fadeOut(),a(e).fadeOut()},3500); if(b.redirect){window.location = b.redirect;}}else{var g=a(".mpce-cfa-fail",c),f=a(".mpce-cfa-message",c);f.html('<div class="mpce-cfa-fail"> '+MPCE_CFA_Ajax.fail+": "+b.errors+"</div>"),a(f).fadeIn(200),a(g).fadeIn(200),setTimeout(function(){a(f).fadeOut(),a(g).fadeOut()},3500)}},error:function(a){d.fadeOut(),console.log(a)}}),c[0].reset(),0!==e.length&&grecaptcha.reset(a(e).data("widget")),b.stopImmediatePropagation(),!1})})}(jQuery);var widgets=[];
